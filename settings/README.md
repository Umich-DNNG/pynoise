# Settings

This folder contains all the relevant settings for the PyNoise Suite, allowing modular anyalsis and parameter adjustments during runtime. This section will outline each subgroup of settings and the acceptable values for each parameter. Please consult the `default.json` file to examine all of the settings.

## Format

Setting options can be stored after runtime in .json files for later use. *Because settings files are read through the default JSON reader, it is up to the user to ensure proper formatting and valid values.* Please review general json formatting or inspect the default.json file to ensure this is done correctly. A sample settings group is provided to demonstrate proper formatting:

```
"CohnAlpha Settings": {
    "Dwell time": 2e6,
    "Meas time range": [
        1.5e11,
        1e12
    ],
    "Clean pulses switch": true,
    "Font Size": 12, 
    "Annotation Font Weight": "bold",
    "Annotation Color": "black",
    "Annotation Background Color": "white",
    "nperseg": 4096
}
```

## Appending Settings

If the user desires to change only a few settings from the default, an abbreviated .json file can be used. Providing a setting in the file will overwrite the current setting during runtime, or create a new setting if it does not currently exist (Matplotlib settings only). Matplotlib settings can also be removed by providing an empty string ("").  See single.json for an example of appropriate append file syntax.

Note: the append feature is the main feature.

## Editing Settings

Settings can be edited live during runtime using either vim or nano in terminal mode, or in the window in GUI mode. Editing in the window is intuitive, but the vim requires more explanation. In the vim, you can modify settings directly on a json file. At the end of editing, the current settings will be completely overwritten by whatever is in this vim. As such, ensure the vim file is in compliance with the formatting outlined in the Settings Input Format section.

**vim Commands**

When using the vim editor, there are a couple of essential commands that should be known to be able to efficiently modify the settings.

When in view mode:
* `[$]` - Go to the end of the current line
* `[0]` - Go to the beginning of the current line
* `[Shift + arrow key]`: Go mutiple spaces in the direction of the arrow

To enter/exit editing mode:
* `[s|a|i]` - enter editing mode
* `[esc|ctrl + C]`: exit editing mode:

To close the vim:
* `[:wq|:q|:exit]`

*WARNING*: Try to avoid exiting/quitting the program while in the vim. When in use, temporary files are created that will not be correctly deleted if vim editing is halted prematurely. Additionally, terminal formatting may be broken.

## List of Settings

This section provides a comprehensive list of all the settings, the appropriate values for each, and their use.

**INPUT/OUTPUT SETTINGS**: This section contains information about the input and output details of the program.
* `Input file/folder` (*path*): users should input the absolute or relative path to the file/folder that the user wants analyzed. See specific method README files for the exact formatting of these input files. **Please avoid naming folders with periods, as our program differentiates between files and folders by counting periods in the input name.**
* `Time column` (*int*): Specify which column in your data files (if data is in .txt format) the time differences are recorded in (with the leftmost column corresponding to column 0, and incrementing as your move right).
* `Channels column` (*int*): Specify which column in your data files (if data is in .txt format) the channels are recorded in (with the leftmost column corresponding to column 0, and incrementing as your move right). If your .txt file does not contain channels, or you do not want to read them in, you will need to specify ```null``` as the channels column to avoid errors.
* `Save directory` (*path*): Should a user desire to save graphs generated by the program, this absolute or relative path to a folder will be where the graphs are saved.
* `Save figures` (*boolean*): If true, graphs generated by the program will be saved to the specified directory.
* `Save raw data` (*boolean*): If true, the raw analysis data will be exported as a .csv file.
* `Keep logs` (*boolean*): If true, logs will be kept in the (hidden) .logs folder, which keep track of changes made to the settings and types of analyses run. For more information, see the respective README file.
* `Quiet mode` (*boolean*): If true, enables quiet mode (see the quiet mode section for more information).

**GENERAL PROGRAM SETTINGS**: This section contains general program settings that are applied to all methods of analysis.
* `Number of folders` (*int*): When analyzing a folder of data, this specifies how many folders within the given directory should be analyzed.
* `Verbose iterations` (*boolean*): If true and running on folder data, each subfolder will prooduce output instead of just aggregate data.
* `Sort data` (*boolean*): If true, the time stamps given in the input files will be sorted from least to greatest.
* `Show plots` (*boolean*): If true, graphs generated by the program will appear on screen when created.
* `Text editor` (*string*): The text editor used by the program. Can be either vim or nano.

**ROSSIALPHA SETTINGS**: This section has settings specific to Rossi Alpha analysis. Please see the [Rossi Alpha README file](https://github.com/Umich-DNNG/pynoise/blob/master/RossiAlpha/documentation/README.md) for more information.

**COHNALPHA SETTINGS**: This section has settings specific to Cohn Alpha analysis. Please see the [Cohn Alpha README file](https://github.com/Umich-DNNG/pynoise/blob/master/CohnAlpha/documentation/README.md) for more information.

**FEYNMANY SETTINGS**: This section has settings specific to Feynman-Y analysis. Please see the [Feynman-Y README file](https://github.com/Umich-DNNG/pynoise/blob/master/FeynmanY/documentation/README.md) for more information.

**SEMILOG PLOT SETTINGS**: These settings correspond to the built-in matplotlib semilogx settings for whenever the program generates a semilog plot for CohnAlpha. See https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.semilogx.html for full documentation of options. All options on the website are supported.

**HISTOGRAM VISUAL SETTINGS**: These settings correspond to the built-in matplotlib histogram settings for whenever the program generates a bar graph. See https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.bar.html for full documentation of options. All options on the website are supported.

**LINE FITTING SETTINGS**: These settings correspond to the built-in matplotlib plot settings for whenever the program generates a line of best fit for data. See https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.plot.html for full documentation of options. All options on the website are supported.

**SCATTER PLOT SETTINGS**: These settings correspond to the built-in matplotlib plot settings for whenever the program generates a residual graph for the line of best fit. See https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.scatter.html for full documentation of options. All options on the website are supported. 

## Quiet Mode

When enabled, quiet mode will silence all program outputs to the command line excluding error messages and input prompts. This mode is intended for automated commands, when the listing of options is unnecessary and may flood the command line tab with undesired output. ***It is not recommended*** to use this mode when manually running the program. When using quiet mode, ***it is recommended*** to keep logs enabled so that any important changes/analysis can be recorded for later reference.

Quiet mode can also be passed in as a command line argument as `[-q|--quiet]`. This is because there are some inital messages that are printed before settings are initialized and are therefore unaffected by the later imported settings. Similarly, note that default settings have quiet mode turned off, so even if the program is run with ```--quiet```, using default settings will almost immediately turn this off. 
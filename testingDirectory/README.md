# Testing
This section of the PyNoise suite is for running unit tests. Unit tests for this suite are performed via comparing hdf5 files and printing the differences between the files.


## Requirements
In addition to the requirements used by the main Pynoise suite, there is an additional command-line tool used by the testing script named 'h5diff'. Please run the command: 

```sudo apt install hdf5-tools``` 

in your command-line to install h5diff and ensure the testing script functions properly.


## How to use
The testing script works via comparing two separate hdf5 files and printing the differences between the two files via h5diff. 

Before any testing, there will need to be a main file to compare the data to. Run the Pynoise suite with the setting 'Save raw data' set to true and generate the data to be compared to.

After generating the hdf5 file and storing all the testing data, please re-name the file, so that the suite will not continue to use the same hdf5 file and instead generate a new file. The filenames generated by the program will be 'processing_data.h5' and 'pynoise.h5'. 

The example test filenames are named 'processing_data_master.h5' and 'pynoise_master.h5', and will be compared to 'processing_data.h5' and 'pynoise.h5' generated by the suite respectively.

Some example files can be found within the testingDirectory folder.

To run the testing script, please type ```python3 test.py```.

TODO: upload some hdf5 files to let users test with.


## Ideal Settings
To make the testing script run faster, there are a few settings that should be turned on or off.
Keep 'Save raw data' set to true so the program can generate an hdf5 file to compare to, disable 'Save figures' and 'Show plots' to make testing script run faster. For less output, set 'quiet mode' to true.


## Note
When using the testing script, update the location of the files within the script. Currently, the default location is within the data directory. If the location of the hdf5 files are different, update the paths of the files to point to the proper location of the hdf5 files. file1 and file2's path should be pointing to the 'pynoise.h5' files; data1 and data2's path should be pointing to the 'processing_data.h5' files.

h5diff will detect differences between the files and output the number of differences found. However, if there are only tree structure differences between the files, h5diff will mark the files as different but produce no output. To see differences between tree structures, please press 'Y' or 'y' when the script asks to see additional output. However, due to the tree structure, there will be a lot of output. In addition, if there are lots of dataset differences found, all differences will be printed.
